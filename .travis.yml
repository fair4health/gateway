# Copyright (C) 2020  Atos Spain SA. All rights reserved.
# 
# This file is part of the FAIR4Health Gateway.
# 
# This file is free software: you can redistribute it and/or modify it under the 
# terms of the Apache License, Version 2.0 (the License);
# 
# http://www.apache.org/licenses/LICENSE-2.0
# 
# The software is provided "AS IS", without any warranty of any kind, express or implied,
# including but not limited to the warranties of merchantability, fitness for a particular
# purpose and noninfringement, in no event shall the authors or copyright holders be 
# liable for any claim, damages or other liability, whether in action of contract, tort or
# otherwise, arising from, out of or in connection with the software or the use or other
# dealings in the software.
# 
# See README file for the full disclaimer information and LICENSE file for full license 
# information in the project root.

language: java

sudo: false

cache:
  directories:
    - "$HOME/.m2"
    - "$HOME/.sonar/cache"

env:
  global:
    - secure: "THDpwRhw6/ZmMjuX+a9Xt4aVgympzcP49cOBSfsmPJ06PKfgCrq6iJLetWAIW4gJZMo7JiCKNM4BvE6brRBpaQN/7xgXj1flf0eds/BFQwkqUoeiL1ORlMtcIlJvAHZCs4v9VMRlCFR2byUiyFIY6z/XZ9dqded2kWM4q3dE6ztELLKLKU4N40FMqmTDGDwTq7FBDeVX5GTAPcpnKP2/EwTZF7v6SXImcnGdQ/Q26D5lO2PzvzoKg233AH3qkoq6eevDjU50QHT4TJYJ+bQi33MD6///ED/ATX3h/KZq7VZpZ3CreIZSwrlvt84tuzgs5BD7k1G0dVml2NBwAwOPXKU+ab1ZnfGrwXjKVfEvel+/3E18dXhN95oVrb6kob7+L4I+FflRiK6DrZ9LXCGqWVYJIM3srj27luPtl/lae83X9AGSSGkvxwD65DB9YhKFVsndXQR8olUMf+e2yIUEGsgCsdf9WQxUotIqbFU9YabFpuZ8J9zUQO1TsC9FU1qUhEeC5qU8mXSoisdiJPbXewUCrHItc/DSL3MR13yht/ersYOACOd8gzh0ij+bQE/DFxQdeWwILGU8iubJA/t+5GrMAUN7gDbo1ENa9cyHKOtkL5lZgThKJcaz3+GIwl5KW4EZRaEHQzFvwzhp01p2ksRtrx7MwUOHp8pJVp5paVk="
    - secure: "jdDHHKBAJl3UXblqbr7QXnK6RjNKCBod1wlhkYZHJs8x0k0vM0FUReJ2HZNrOP09Cncu9SwTQo+77lPx5tYEFKeV3Q+y0pvIhIeBjUy8k582xBm9QSoKuYKPat6qybnFM/EvZt0hIGImIXodp+KBtyZ4L6AbYiKskCOaP7Yk6Dt3jA3KJA/5hctfCPSmgyKZPZkwGLtiP0qbLtwuMUyvAKVPGA5xwTLCq0DUbBME6jSTEr9pGQ13CRPUmh0xb+TtK7HTCWh2/oEtIlmvmS+UmDNk8zCWxaoffv1jrwdc+W87Gg26QpjaSHCtPqnlPwN9S/x+6O+KxlKhgj/wU84yPC6VV/3XHy867YJRCTFLlLZb26xGpEbF9IhCOGSJbYlySyEOOLQrR2nLdXo+HWi1iSm8U+IDiBAB9M7OQwoRspUZnQUE8tFHSlXKCtE7LItLXYZ/6Ph9EPkkWwemIQzWOMnlTXVcrzCS8NcewFcNx4MyGAu1zAFO70dZJEfLi15Wfb1XJ1NdllCD+TFn+4INHgzK1QbMkUYCw1WdXnle2AsR9LXl9ZTryRncMTnNVZVbTytDu3jUajvtMLyASpFXDxKwCtW7tMVNh8wz/fh3vHumCOJqtEqMI39qzsMKSfifDA7l1QNrXQTKBimKmYxMnnH3DrEW511yTWuk3H/wo0E="
    - secure: "VpeU2ObmXaxjQTdckwd0QUMTRuEzSpml5PzGp+zMEKwRRyU9bXbhwi4bHsR2I48gP7TMk7NTkrrqYfVEXqHQneeZ4/rBqGCGR5Bb+PDZs23RQfLJm6QOnATO06/1pdq0euO9VV5fCqsja1Oip5sa4KEBgNmw6V9lkCnGEP29xv3J0gFmSjyWxS6bsvhL5uKivM8Ph8nFyO+l+vCAQKAKd/PmUWAlo148tRCD2wxOZugKe/6tPqBxW59TXjegXlEjppBHz1nfpWsud7O7QU6I78QfjvT/kXpKxbaIxlISjsCV7x/DhIhGTxHgu8CfuMHO6824NxJYoKTuwbCE93Nvuiod77PTyrYffSgsXwq7IpT3uVRut0WtOgAx3GEynBtfVUfqwToEiWt/1RNimsu+HA2SMNWMfzVq7Lh0F8JP2OK7QYAKLVR0P0ZiICaZXRpDOPmcTY30QcmQO3cDc1p9rAT5dFKL7j6EFB0LZCd2T6XdhuPHBF76eYch0xZx7mOqQAXQbdQ4hj46sGBCjQwhc3gwnk6fYkoQzVwgUq5oF3BiyoXpo8dc2ZH7/mQm/JSmPVAKUsnJPqu/HiDEMbGI1OsXUTe0a5drzbmLI0YW1tKBtBr1Bb5J+d3rdQQn2qfXWTAw3Qnlg+cH2Wz5bbARpc9hYnyFryrqSvqfp0LKrqg="
    - secure: "b934bW0zxFoDr99dK/fcN2wsZ9R+IaxXaPyUikiLuyLRJdELnMa0RMcJ/7Y0G8FMOLObajjXZa0maGQV8u13hGH/m0035cSkHVoibRfQTrDgaJad3xH6wb1fhTzPl+Qe5R/hgf65n4AVdFB+98T6lH6f0L9aathQ3IRhe6Jly66YA8ZbOWdKxFq/oWn7EUxGexGORpeSZ0B6mpazLbrQ9NkaAtlgdgo/+5X0rJUzr4iKxaHUNvhoEib8Aq2HcKfkVoPyP/jFcjgsa5D7Vny2GI9qSmKaXiC0z6bbRe7rlGUoylJG317BNkw86l2AaZR4l7vrEDAv4oAQTOinJ+bL9ZkilKhhrhnOUU5Ld312DwOdteV/I/N1YUbhhIcl+OkgFEoYmOI8JnkaOXSaF1iBZartqAynSVOgSYANkFeIri5fXvXJdG/J6JDuL6DnsO2sHMxl7ZSRt90s+J9HyU/yzfSmE6WiK6CnHg/wH2M6V7koSlAh38R+rHFL2EKS6gN2+6fG2wrh1ZJGnjGdGaElXyw0E0sr7PxnG88fBrxQ9Qz3hiXvj/FZVRNYRLGaxxYCF64VunwO/U7ma4Iss1krovdkxulkm4UpwvVVVHIIrIbjLGvKNQCoe4Z83d1/CSUXL2f2xVMCrFzUhnNj69tN4N4U9xpT+0Vn8II2v+7AfvU="
    - secure: "GZu5ABkGGxt7t4BujdqeKgX/PFR8/s1Tr9KAeEjoDliK2uGp6CUe11b6oeJUMZgU9Dcooq2FtE5L9p/xdCzbn9opwZG0UZTnuJMXfbXOFgm8lDBD7I3w5gFrWnNH4fTtF7Eqmhemzt/LkARxGKrdtk5Lrh1w5iOXhhGJVZf9ECG/WYMlNT+2Lb+vD/PHXwRCwSSe9+QejMYZxluZ3agyU7cSgwGLY88OutktbOLUsJjGvSTqcZeN9dnnoSv/8vw5hZDr1H0lsu5UKzZWEZFsfd3htKuXCzVcxy/hcilIF0ubFHKugP9SMx+hSgOeXPTzmjkrfrK9Z5Zv3cN6x9C4eiYs57tk934e90OAQ3npMYnDWuKpYA5Ff0Md9rfyBF10W9nL7wCBb8/HmDaC4BR8P/wgmJe20qOhAbOUrN1miseF7XK0XYgGNBVjHgwfMGRnXz0fHaF3b2X8PygK8DhND9iZVIwccQ8wzs7jsjizDI2L2wajjhqsln9dhJ9OYhXv3oQJmL5OHDp0VhLzexY0tI+gWkF+ns9bIAodohHoDSNgc0VkGTrBWuqyJVmPLOpgPs1HnHAC8wH9cb3LSxjJL4NWek2tbn9ny03gTquz6jdIykAPUUA3ISRK23Qx9yPiQBfP8VcKprWryHWOogtyR9JlRZ4sEDhGU+ytQTWb15Q="
    - secure: "loL3wmn4H4qz75LHer2QmICPFkvPBU44ZH/MTBNizO22+Z0FWeLwNdwpc+p14bhA3mfsGELC3RF9GttlcZgKYoHLdWmnlJPqQO3VZznSYRB9QvN78pLbKyx50Lr3dSLER/lGT/Y7+R9bsneRQzZQU/Lmg4jrsILFGG0L74YOlVT74Qb9nNQZw3WFEP6Eo0fs3DqxVzcuAHAC2/7b3oSGJsB6fMRIGg6ooCk/YYwqoaWgcuJBLpXdmDlpomWG17a8MUpRID1TFGVg3E+chNmmhdTXP33536hlNNCDp+FSxEj6oe6tkJDQLy6lmcvE4sKBC1Nil41C5xwo2hq1avhPa3Ot4F/6FVq0vj3dYdzDsvnD0iwTDDorUlaRO5YZPKgdkwpn/udqn08BsGCKE8NJOM410+onjpHKh7ADhlI4rA5TXM1E5NXjKEqU7a6hL3WLF+VbbqKvSQqt2RdR+692cn2wjGOdkwi/aKv/uwNejFT+wLRD4hR5eaosGn6hfiq0RuOPXKeNA1NB3Y2XgUFLuXrA0d8Xg6Xhn7GBKZXvQFUU+r936LOd1Kqu2ZigwzJz3fZYvM+oCQb2E2u/szn3vmvolpdht2603jIQ2sHYCTRR0D5JIjuErLuAGGsfyo5uXv89EGZrVY1VYa9V9KXOLC8a1FO3tv/G4ZB6OL4vx3E="
    - secure: "mEdMSiAJJBAee8uOy9Un+cP+sgbz02Ynkx3LjzHE4+O9v//cMeuFflZ+lNI9nbjUT/zIYzW8U0StF6xx3Zkhl1ieqyY1z28lf0IhPfJV9y6wzOZBwCeNhaLFAyK44XtvHlCt3QWeSDzXplQMooYwjMYlJRalCBgZuXw5HQtRm5f3zZ6FgibmRkUtqg0wN8r/PVsfvDfmsXsliVIhqg4WDdgXOo+34y2K3UncagGzB7N1+G9at2VW8VDnjIqKeBy7GWZVkUY/Ku7w3pCQHQNhk3Efi7yKo1P4IXtbd/XIBCWyScYHB4W/g17EWLnTW1+IoveICiYYenRV3ar+8VJAy7mnfiNvxZPFngLD/x0wxomWIydUNhI1m+0EaBJvpCjEnqvPB5rvjC/FZMw24n7KdcGSVh/CElvL1I9Pg9NLzz1GMUNR2sLO97OIaPgT/pvzHaGZI3bRk7CqvN61h2PiIwBLcwJxncAMF52A+CI1u7Crs6Ar9lhFuWZdM1YXu86gs/sUlS+qPZA9X6ZSzL6bXzamhYqdElM0hmn5ARR62407RGxfhIMGa2cBiFqNa8YrDBlyB3aiImkQ1+LTgn/N3P0DARVyk3XPmXGjT8MDdoW97zEdVmlywTK0NcRtpMSp6YtCnXDshYcXxeBkp+cDXnJLHeIppitb1khllhmkYCY="
    - secure: "PVg+xeLAq0nBtQKoSW3DYk8wxRHcn8qDDXORyhGgKRyV/eoWxYft11aBJpUo16wYGWk2xPl0no8zriHAO8uc0RJ1LmUW3qp+QJD0hGf3zdl2+6Tal5LqPZgM+j1nY3ApW3v7DdH/tyKbwPuCEPMhhCnCEb+qWXS+RaK7l0V8uFF2vtd9dz1Fr5q9Pti1asHzcg/kRNWE+Fc9pmOCWFKzLq+vKbA3FkMRRViZJ48/sbH3zpkm09L+11xefHBnuMfNsAMffkyKD2ybLi7DvhFvNTphoTkvPD7syHELnQe2SQ425QE11vcDWNm7zegL27gLtjYk1vXjToGJopwA+Sr9YZousDg5E55nOHGFo9M5tw9MIB/eA181odSu48g9uz0I5dcGVMS2aN7011evKMAL5ZQFqWfnwsc+cEBobWIjw2jGL/xdCq3CR/EILQ6LdptIyDRv3r0iAvhgxwABxTzJMGZHbi1kg3xXCzms2qNNVt/kpKnI5Gog7VyEIdCOhx0w64EVaD3PqIKAdva95JGLv7C0K0LEcJKgY6qIFfHAWvyNINqGUXUMI0FMzOgZSyuoPGMGEyveJB9J+CrgLzG1dJaEsyMFt/H/BijQIJmgewyeuVY7qFn1CFjTiJyzN3vrYe0MFI6/D+P0xZ5+207RuY5ggztHOSNZrBGmfL/OhyE="
  
addons:
  sonarcloud:
    organization: "fair4health"
    token:
      secure: "ccSjXmvUVFVUZmil93RnQleavlR43yceW73oPy97L6JjQSGqh3HCYIPQXVpuBtZlSti9kDv4uV9RGFEr0Q1w1T7CCK42lrC2cBatzSqbKa2x27AQg/7hbjOZFKlCz5p3i+6WTuOjl5g5cLsuS92BRcnEsHbdd6U/AeCKjIv2t0D0RZWn33fkCdttxM6RJtasdNX3XSrsmAIoZ/Yn054PxCHBwTkpzICiEwXb5qhfX+vcIXxEov5wCbOhIzi5+koXca487cYeJ0DMsJ0bMzK4GtITH56Ghw6+QvrbB20nXneIg5hG+H+qcdQmpsiadBQNnFz0hiFfBWdZhJ9FVVmCqebcTc+k8pXdNUdwwx5+Mg6lqRQ7HVDZzaHDhTMjL7p5swQpIbhVV8ctrIVVfgIoq7T20pIxh/Wx35rbpnVGI/+JQTclAXfLp51cfQLn04VuQNcMhnaboH76sRco7TgIQBoAcpnQLUwMOkpLW85SQcB6zpo5Es/KKcu6g3qnHfEDYVNa0YseD/m8DcU9C4uWAcXpUcL3Z2K9OAat8iNiBlETQfLJHxNC2f+DVUaMsu0JGfZxtccCzsSDf9I8PF/0ywR/j5LKfgqTE3pd/jz4Vb4wa+9o9Kja1g5STDmJ55OyduQJ+dZgVDe041AssEAZGaXRi4hBpuWraymJ583A/WU="

script:
  - if [ "$TRAVIS_PULL_REQUEST" = "true" ]; then mvn clean test; mvn package -Dmaven.test.skip=true; fi
  - if [ "$TRAVIS_BRANCH" = "master" ]; then mvn clean test; mvn sonar:sonar; fi
  - if [ "$TRAVIS_BRANCH" = "release" ]; then chmod +x .travis/prepare.sh && .travis/prepare.sh; mvn -s .travis/settings.xml -B release:clean release:prepare; git push --tags; mvn -s .travis/settings.xml -B release:perform; chmod +x .travis/push.sh && .travis/push.sh; fi

after_success:
- bash <(curl -s https://codecov.io/bash)
